




1 MESECNI PUTNICI
- koliko su putovanja imali po mesecu
- koliko su otkazivanja putovanja imali po mesecu
- vreme i datum otkazivanja voznje
- koliko puta su platili po mesecu 
- koliki je ukupan iznos placanja po mesecu 
- kome su platili 
- kada su platili
- koji su radni dani putnika
- koje je radno vreme 
- adresa polaska bela crkva
- adresa polaska vrsac
- broj telefona
- tip putnika (radnik-ucenik)
- gde su zaposleni ako je radnik
- koja skola je u pitanju za ucenika
(PS NEKI RADE PRIMER NEDELJNI 6-14, NEKI MENJAJU SVAKE NEDELJE RADNO VREME TO BI JA TREBAO RUCNO PRIMER PONEDELJAK 5-13 UTORAK 12-19 SREDA 9-17 i tako dalje)

2 DNEVNI PUTNICI
ovde ne znam sta bi mi trebalo iskreno predlozi mi ti

3 VOZACI
- Koliko dodatih putnika 
- Koliko pokupljenih 
- Koliko otkazanih
- Koliko sitnog novca za kusur
- Koliko imaju pazara (dnevnog/nedeljnog/mesecnog/godisnjeg)
- kilometraza
- Koliko naplacenih mesecnih karata
ChatGPT said:
Razumem, hoÄ‡eÅ¡ da napraviÅ¡ sistem statistike u Supabase tabelama koji obuhvata meseÄne putnike, dnevne putnike i vozaÄe, sa svim detaljima koje si naveo. Evo ti predlog kako da organizujeÅ¡ baze tako da moÅ¾eÅ¡ lako da pratiÅ¡ sve Å¡to ti treba:

1. MeseÄni putnici (mesecni_putnici)
Tabela sa svim osnovnim podacima i praÄ‡enjem aktivnosti.

Kolone:

id (PK, auto increment)

ime (text)

telefon (text)

tip (enum: radnik, uÄenik)

adresa_bc (text)

adresa_vs (text)

firma (text, NULL ako je uÄenik)

skola (text, NULL ako je radnik)

radni_dani (jsonb, npr. ["pon", "uto", "sre"])

radno_vreme (jsonb, npr. {"pon": "5-13", "uto": "12-19"})

Posebna tabela za statistiku putovanja: mesecni_statistika

id (PK)

putnik_id (FK â†’ mesecni_putnici.id)

datum_voznje (date)

otkazano (boolean)

vreme_otkazivanja (timestamp, NULL ako nije otkazano)

placeno (boolean)

iznos (numeric)

datum_placanja (timestamp)

naplatio_vozac (text)

ğŸ‘‰ Ovako moÅ¾eÅ¡ da pratiÅ¡ po mesecu:

COUNT(putnik_id) â†’ broj voÅ¾nji

COUNT(otkazano) â†’ broj otkazivanja

SUM(iznos) â†’ ukupan prihod od tog putnika

2. Dnevni putnici (dnevni_putnici)
Ovo su oni Å¡to kupe kartu na licu mesta. Njih ne moraÅ¡ da pamtiÅ¡ dugoroÄno, ali je korisno imati istoriju.

Kolone:

id (PK)

ime (text, moÅ¾e i NULL ako neÄ‡eÅ¡ unositi svima)

telefon (text, opcionalno)

grad_polaska (enum: Bela Crkva, VrÅ¡ac)

polazak (time)

dan (date)

placeno (boolean)

iznos (numeric)

naplatio_vozac (text)

ğŸ‘‰ Statistika:

koliko je dnevnih po danu, nedelji, mesecu

ukupan prihod od njih

raspodela po vozaÄima

3. VozaÄi (vozaci)
Tabela sa osnovnim podacima o vozaÄu.

Kolone:

id (PK)

ime (text)

telefon (text)

sitni_novac (numeric, koliko nosi za kusur)

Statistika vozaÄa â†’ tabela vozac_statistika

id (PK)

vozac_id (FK â†’ vozaci.id)

datum (date)

broj_dodatih_putnika (int)

broj_pokupljenih (int)

broj_otkazanih (int)

pazar (numeric)

kilometraza (numeric)

naplacene_mesecne_karte (int)

ğŸ‘‰ Ovako lako vidiÅ¡ za svakog vozaÄa posebno:

koliko je dodao putn
1. MeseÄni putnici
-- Glavna tabela za meseÄne putnike
create table if not exists mesecni_putnici (
    id bigserial primary key,
    ime text not null,
    telefon text,
    tip text check (tip in ('radnik', 'ucenik')) not null,
    adresa_bc text,
    adresa_vs text,
    firma text,
    skola text,
    radni_dani jsonb,     -- primer: ["pon", "uto", "sre"]
    radno_vreme jsonb     -- primer: {"pon": "5-13", "uto": "12-19"}
);

-- Statistika za meseÄne putnike
create table if not exists mesecni_statistika (
    id bigserial primary key,
    putnik_id bigint references mesecni_putnici(id) on delete cascade,
    datum_voznje date not null,
    otkazano boolean default false,
    vreme_otkazivanja timestamp,
    placeno boolean default false,
    iznos numeric(10,2),
    datum_placanja timestamp,
    naplatio_vozac text
);
2. Dnevni putnici
create table if not exists dnevni_putnici (
    id bigserial primary key,
    ime text,
    telefon text,
    grad_polaska text check (grad_polaska in ('Bela Crkva', 'Vrsac')) not null,
    polazak time not null,
    dan date not null,
    placeno boolean default false,
    iznos numeric(10,2),
    naplatio_vozac text
);
3. VozaÄi
-- Glavna tabela vozaÄa
create table if not exists vozaci (
    id bigserial primary key,
    ime text not null,
    telefon text,
    sitni_novac numeric(10,2) default 0
);

-- Statistika vozaÄa po danima
create table if not exists vozac_statistika (
    id bigserial primary key,
    vozac_id bigint references vozaci(id) on delete cascade,
    datum date not null,
    broj_dodatih_putnika int default 0,
    broj_pokupljenih int default 0,
    broj_otkazanih int default 0,
    pazar numeric(10,2) default 0,
    kilometraza numeric(10,2) default 0,
    naplacene_mesecne_karte int default 0
);
4. Dodatno â€“ Korisni indeksi
(Da bi upiti bili brÅ¾i, pogotovo za statistiku po mesecima i vozaÄima.)

create index if not exists idx_mesecni_statistika_datum on mesecni_statistika(datum_voznje);
create index if not exists idx_dnevni_putnici_dan on dnevni_putnici(dan);
create index if not exists idx_vozac_statistika_datum on vozac_statistika(datum);

