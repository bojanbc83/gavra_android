# üß† –î–£–ë–û–ö–ê –ê–ù–ê–õ–ò–ó–ê –ú–ê–ü–ò–†–ê–ä–ê –ü–û–î–ê–¢–ê–ö–ê

**–î–∞—Ç—É–º –∞–Ω–∞–ª–∏–∑–µ**: 20.10.2025  
**–°—Ç–∞—Ç—É—Å**: –ö–û–ú–ü–õ–ï–¢–ù–û –ê–ù–ê–õ–ò–ó–ò–†–ê–ù–û

---

## üö® **–ö–†–ò–¢–ò–ß–ù–ò –ü–†–û–ë–õ–ï–ú–ò –ö–û–à–ò –ó–ê–•–¢–ï–í–ê–à–£ –•–ò–¢–ù–û –†–ï–®–ê–í–ê–ä–ï**

### **1. –í–†–ï–ú–ï–ù–°–ö–ê –ú–ê–ü–ò–†–ê–ä–ê - –•–ê–û–°!** ‚ö†Ô∏è

–ù–∞–ø—Ä–∞–≤—ô–µ–Ω–∞ —ò–µ –¥–µ—Ç–∞—ô–Ω–∞ –∞–Ω–∞–ª–∏–∑–∞ —Å–≤–∏—Ö –≤—Ä–µ–º–µ–Ω—Å–∫–∏—Ö –ø–æ—ô–∞ –∏ –æ—Ç–∫—Ä–∏–≤–µ–Ω–µ —Å—É –æ–∑–±–∏—ô–Ω–µ –Ω–µ–∫–æ–Ω–∑–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏:

#### **–ê) –í–ò–®–ï–°–¢–†–£–ö–ò –ú–ê–ü–ò–†–ê–ä–ê –ó–ê –ò–°–¢–û –ü–û–â–ï:**

```dart
// üî¥ –ü–†–û–ë–õ–ï–ú: 3 —Ä–∞–∑–ª–∏—á–∏—Ç–∞ –ø–æ—ô–∞ –∑–∞ –≤—Ä–µ–º–µ –ø–æ–∫—É–ø—ô–µ—ö–∞!
vremePokupljenja: map['poslednje_putovanje'] != null        // –ü–†–ò–û–†–ò–¢–ï–¢ 1
    ? DateTime.parse(map['poslednje_putovanje'] as String)
    : (map['vreme_pokupljenja'] != null                      // –ü–†–ò–û–†–ò–¢–ï–¢ 2  
        ? DateTime.parse(map['vreme_pokupljenja'] as String)
        : null),                                             // –ü–†–ò–û–†–ò–¢–ï–¢ 3

// üî¥ –ü–†–û–ë–õ–ï–ú: –†–∞–∑–ª–∏—á–∏—Ç–æ –º–∞–ø–∏—Ä–∞—ö–µ –∑–∞ –≤—Ä–µ–º–µ –ø–ª–∞—õ–∞—ö–∞
vremePlacanja: map['vreme_placanja'] != null               // –£ —ò–µ–¥–Ω–æ–º –º–æ–¥–µ–ª—É
vremePlacanja: map['datum_putovanja'] != null              // –£ –¥—Ä—É–≥–æ–º –º–æ–¥–µ–ª—É
```

#### **–ë) –§–ê–à–õ–û–í–ò –°–ê –ù–ï–ö–û–ù–ó–ò–°–¢–ï–ù–¢–ù–ò–ú –ú–ê–ü–ò–†–ê–ä–ï–ú:**

| –§–∞—ò–ª | –í—Ä–µ–º–µ –ø–æ–∫—É–ø—ô–µ—ö–∞ | –í—Ä–µ–º–µ –ø–ª–∞—õ–∞—ö–∞ | –°—Ç–∞—Ç—É—Å |
|------|------------------|----------------|--------|
| `putnik.dart` –ª–∏–Ω–∏—ò–∞ 117-121 | `poslednje_putovanje` ‚Üí `vreme_pokupljenja` | `vreme_placanja` | ‚ùå –ù–ï–°–¢–ê–ù–î–ê–†–î–ù–û |
| `putnik.dart` –ª–∏–Ω–∏—ò–∞ 155-157 | - | `datum_putovanja` | ‚ùå –ü–û–ì–†–ï–®–ù–û |
| `mesecni_putnik.dart` | `poslednje_putovanje` | `vreme_placanja` | ‚úÖ –ò–°–ü–†–ê–í–ù–û |
| `putovanja_istorija.dart` | `vreme_pokupljenja` | `vreme_placanja` | ‚úÖ –ò–°–ü–†–ê–í–ù–û |

#### **–¶) –£–°–õ–û–í–ò –ó–ê –†–ï–§–ê–ö–¢–û–†–ò–°–ê–ä–ï:**
```dart
// ‚úÖ –¶–ò–â–ê–ù–û –°–¢–ê–ä–ï:
vremePokupljenja: map['vreme_pokupljenja']  // –°–ê–ú–û –à–ï–î–ù–û –ü–û–â–ï
vremePlacanja: map['vreme_placanja']        // –°–ê–ú–û –à–ï–î–ù–û –ü–û–â–ï
```

---

### **2. STATUS –ü–û–â–ê - –£–°–ü–ï–®–ù–û –ú–ò–ì–†–ò–†–ê–ù–û** ‚úÖ

–ê–Ω–∞–ª–∏–∑–∞ –ø–æ–∫–∞–∑—É—ò–µ –¥–∞ —Å—É deprecated status –ø–æ—ô–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–º–µ—ö–µ–Ω–∞:

```dart
// ‚úÖ –°–¢–ê–†–ò –ö–û–î (deprecated):
// map['status_bela_crkva_vrsac']
// map['status_vrsac_bela_crkva'] 

// ‚úÖ –ù–û–í–ò –ö–û–î (–∞–∫—Ç–∏–≤–∞–Ω):
status: map['status'] as String? ?? 'nije_se_pojavio'
```

**–°—Ç–∞—Ç—É—Å**: –°–∞–º–æ –∫–æ–º–µ–Ω—Ç–∞—Ä–∏ —Å—É –æ—Å—Ç–∞–ª–∏, deprecated –ø–æ—ô–∞ —Å–µ –Ω–µ –∫–æ—Ä–∏—Å—Ç–µ –≤–∏—à–µ.

---

### **3. JSON –°–¢–†–£–ö–¢–£–†–ï - –î–ï–¢–ê–â–ù–û –î–û–ö–£–ú–ï–ù–¢–û–í–ê–ù–û** üìã

#### **–ê) `polasci_po_danu` –°–¢–†–£–ö–¢–£–†–ê:**

```json
{
  "pon": {"bc": "7:00", "vs": "17:00"},
  "uto": {"bc": "7:30", "vs": "16:30"},
  "sre": {"bc": "8:00", "vs": "16:00"},
  "cet": {"bc": "7:00", "vs": "17:00"},
  "pet": {"bc": "7:15", "vs": "16:45"}
}
```

#### **–ë) –ü–ê–†–°–ï–† –õ–û–ì–ò–ö–ê:**

1. **–ü–∞—Ä—Å–µ—Ä –ø–æ–∫—É—à–∞–≤–∞**: `polasci_po_danu` JSON –ø–æ—ô–µ
2. **Fallback**: –ü–æ—ò–µ–¥–∏–Ω–∞—á–Ω–µ –∫–æ–ª–æ–Ω–µ `polazak_bc_pon`, `polazak_vs_pon`
3. **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—ò–∞**: –ö—Ä–æ–∑ `TimeValidator.normalizeTimeFormat()`

```dart
// –¢–æ–∫ –∏–∑–≤—Ä—à–∞–≤–∞—ö–∞:
parsePolasciPoDanu(rawMap['polasci_po_danu'])
‚Üí normalizeTime(bc?.toString())
‚Üí TimeValidator.normalizeTimeFormat(raw)
```

#### **–¶) –í–ê–†–ò–à–ê–ù–¢–ï –ö–û–õ–û–ù–ê (15+ –≤–∞—Ä–∏—ò–∞–Ω—Ç–∏!):**

```dart
final candidates = [
  'polazak_${place}_$dayKratica',           // polazak_bc_pon
  'polazak_${place}_${dayKratica}_time',    // polazak_bc_pon_time
  '${place}_polazak_$dayKratica',           // bc_polazak_pon
  '${place}_${dayKratica}_polazak',         // bc_pon_polazak
  '${place}_${dayKratica}_time',            // bc_pon_time
  'polazak_${dayKratica}_$place',           // polazak_pon_bc
  'polazak_${dayKratica}_${place}_time',    // polazak_pon_bc_time
];
```

---

### **4. VOZAC UUID MAPPING - –•–ò–ë–†–ò–î–ù–ò –°–ò–°–¢–ï–ú** üîÑ

#### **–ê) –¢–†–ï–ù–£–¢–ù–ò –°–¢–ê–¢–£–°:**

```dart
// üü° –•–ò–ë–†–ò–î–ù–ò –ü–†–ò–°–¢–£–ü:
static const Map<String, String> _fallbackMapping = {
  'Bilevski': '8e68c6c7-3b8b-4f8a-a9d2-2f4b5c8d9e0f',
  'Bruda': '7d59b5b6-2a4a-3e9f-98e1-1e3b4c7d8e9f',
  'Bojan': '6c48a4a5-194f-2d8e-87d0-0d2a3b6c7d8e',
  'Svetlana': '5b379394-084e-1c7d-76bf-fc193a5b6c7d',
};
```

#### **–ë) ASYNC/SYNC –î–£–ê–õ–ò–ó–ê–ú:**

- **Async –º–µ—Ç–æ–¥–µ**: `getVozacUuid()`, `getVozacIme()` - –∏–¥—É —É –±–∞–∑—É
- **Sync –º–µ—Ç–æ–¥–µ**: `getVozacUuidSync()`, `getVozacImeWithFallbackSync()` - –∫–æ—Ä–∏—Å—Ç–µ cache
- **Cache —Å–∏—Å—Ç–µ–º**: 30 –º–∏–Ω—É—Ç–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏

#### **–¶) –ú–ï–°–¢–ê –ö–û–†–ò–®–ã–ï–ä–ê:**

- **40+ —Ä–µ—Ñ–µ—Ä–µ–Ω—Ü–∏** —É —Ü–µ–ª–æ–º –∫–æ–¥–Ω–æ—ò –±–∞–∑–∏
- **Async**: –£ —Å–µ—Ä–≤–∏—Å–∏–º–∞ –≥–¥–µ —ò–µ –º–æ–≥—É—õ–µ
- **Sync**: –£ –º–æ–¥–µ–ª–∏–º–∞ –∏ widget-–∏–º–∞ –≥–¥–µ async –Ω–∏—ò–µ –¥–æ–∑–≤–æ—ô–µ–Ω

---

## üéØ **–ü–†–ò–û–†–ò–¢–ï–¢–ù–ò –ü–õ–ê–ù –†–ï–§–ê–ö–¢–û–†–ò–°–ê–ä–ê**

### **–§–ê–ó–ê 1: –•–ò–¢–ù–û - –í–†–ï–ú–ï–ù–°–ö–ê –ú–ê–ü–ò–†–ê–ä–ê**

```bash
# –§–∞—ò–ª–æ–≤–∏ –∑–∞ –∏–∑–º–µ–Ω—É:
lib/models/putnik.dart          # 3 –º–µ—Å—Ç–∞ –∑–∞ –∏—Å–ø—Ä–∞–≤–∫—É
lib/models/mesecni_putnik.dart  # –ü—Ä–æ–≤–µ—Ä–∏ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç  
lib/services/putnik_service.dart # –£—Å–∞–≥–ª–∞—Å–∏ —Å–∞ –Ω–æ–≤–∏–º –º–∞–ø–∏—Ä–∞—ö–µ–º
```

**–ê–∫—Ü–∏—ò–∞**: –ó–∞–º–µ–Ω–∏ —Å–≤–∞ `poslednje_putovanje` ‚Üí `vreme_pokupljenja` –º–∞–ø–∏—Ä–∞—ö–∞

### **–§–ê–ó–ê 2: –°–†–ï–î–ä–ò –ü–†–ò–û–†–ò–¢–ï–¢ - UUID MAPPING**

```bash
# –¶–∏—ô: –ú–∏–≥—Ä–∞—Ü–∏—ò–∞ –Ω–∞ –ø—É–Ω—É –±–∞–∑—É –ø–æ–¥–∞—Ç–∞–∫–∞
- –ü–æ–ø—É–Ω–∏ vozaci —Ç–∞–±–µ–ª—É —Å–∞ —Å–≤–∏–º –≤–æ–∑–∞—á–∏–º–∞
- –£–∫–ª–æ–Ω–∏ fallback –º–∞–ø–∏—Ä–∞—ö–µ  
- –¢–µ—Å—Ç–∏—Ä–∞—ò cache —Å–∏—Å—Ç–µ–º
```

### **–§–ê–ó–ê 3: –ú–ê–õ–ò –ü–†–ò–û–†–ò–¢–ï–¢ - JSON –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–à–ê**

```bash
# –¶–∏—ô: –°–º–∞—ö–∏ –±—Ä–æ—ò –≤–∞—Ä–∏—ò–∞–Ω—Ç–∏ –∫–æ–ª–æ–Ω–∞
- –ó–∞–¥—Ä–∂–∏ —Å–∞–º–æ 'polazak_${place}_$dayKratica' –≤–∞—Ä–∏—ò–∞–Ω—Ç—É
- –£–∫–ª–æ–Ω–∏ 14 deprecated –≤–∞—Ä–∏—ò–∞–Ω—Ç–∏
- –ê–∂—É—Ä–∏—Ä–∞—ò –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—ò—É
```

---

## üìä **–ú–ï–¢–†–ò–ö–ï –ê–ù–ê–õ–ò–ó–ï**

| –ö–∞—Ç–µ–≥–æ—Ä–∏—ò–∞ | –ü—Ä–æ–±–ª–µ–º–∏ | –†–µ—à–µ–Ω–æ | –ü—Ä–µ–æ—Å—Ç–∞–ª–æ |
|------------|----------|--------|-----------|
| –í—Ä–µ–º–µ–Ω—Å–∫–∞ –º–∞–ø–∏—Ä–∞—ö–∞ | üî¥ 8 | 0 | 8 |
| Status –ø–æ—ô–∞ | üü¢ 2 | 2 | 0 |
| JSON —Å—Ç—Ä—É–∫—Ç—É—Ä–µ | üü° 5 | 4 | 1 |
| UUID –º–∞–ø–∏—Ä–∞—ö–µ | üü° 3 | 2 | 1 |
| **–£–ö–£–ü–ù–û** | **18** | **8** | **10** |

---

## üöÄ **–°–õ–ï–î–ï–ã–ò –ö–û–†–ê–¶–ò**

1. **–ò–∑–≤—Ä—à–∏ –§–ê–ó–£ 1** —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Å–∞—ö–∞
2. **–¢–µ—Å—Ç–∏—Ä–∞—ò** –Ω–∞ development –æ–∫—Ä—É–∂–µ—ö—É
3. **–ö—Ä–µ–∏—Ä–∞—ò PR** —Å–∞ –∏–∑–º–µ–Ω–∞–º–∞
4. **–ê–∂—É—Ä–∏—Ä–∞—ò** SUPABASE_FINAL.md –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—ò—É

---

**‚ö° –ó–ê–ö–â–£–ß–ê–ö**: –ö–æ–¥ –∏–º–∞ –æ–∑–±–∏—ô–Ω–µ –Ω–µ–∫–æ–Ω–∑–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ —É –≤—Ä–µ–º–µ–Ω—Å–∫–∏–º –º–∞–ø–∏—Ä–∞—ö–∏–º–∞ –∫–æ—ò–µ –∑–∞—Ö—Ç–µ–≤–∞—ò—É —Ö–∏—Ç–Ω—É –∏–Ω—Ç–µ—Ä–≤–µ–Ω—Ü–∏—ò—É. –û—Å—Ç–∞–ª–∏ —Å–∏—Å—Ç–µ–º–∏ —Å—É —Ä–µ–ª–∞—Ç–∏–≤–Ω–æ —Å—Ç–∞–±–∏–ª–Ω–∏.

**üìã –°–¢–ê–¢–£–°**: –ê–ù–ê–õ–ò–ó–ê –ó–ê–í–†–®–ï–ù–ê - –°–ü–†–ï–ú–ù–û –ó–ê –†–ï–§–ê–ö–¢–û–†–ò–°–ê–ä–ï